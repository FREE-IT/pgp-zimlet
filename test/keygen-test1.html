<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>OpenPGP.js - Keygen test for Zimbra OpenPGP Zimlet</title>
<script src="scripts/openpgp.js"></script>
</head>
<body>
<h1>OpenPGP.js - Keygen test for Zimbra OpenPGP Zimlet</h1>
<textarea id="output" rows="20" cols="100"></textarea>
<script>
//for version v2.0.0-dev of openpgp.js
var options = {
    userIds: [{ name:'Jon Smith', email:'jon@example.com' }], // multiple user IDs
    numBits: 4096,                                            // RSA key size
    passphrase: 'super long and hard to guess secret'         // protects the private key
};
//openpgp.initWorker('scripts/openpgp.worker.js');
//Uncaught Error: Unhandled error in openpgp worker: undefined (undefined:undefined)AsyncProxy.worker.onerror @ openpgp.js:19158
openpgp.generateKey(options).then(function(key) {
    // success
    var privkey = key.privateKeyArmored;
    var pubkey = key.publicKeyArmored;
    document.getElementById('output').value = 'Your new key pair for testing only uid=`Jon Smith jon@example.com and passphrase: `super long and hard to guess secret`:\r\n\r\n'+key.privateKeyArmored+'\r\n\r\n'+key.publicKeyArmored;
}).catch(function(error) {
    // failure
});

</script>
<pre>
This file is part of the Zimbra OpenPGP Zimlet project.
Copyright (C) 2014-2016  Barry de Graaff

Bugs and feedback: https://github.com/Zimbra-Community/pgp-zimlet/issues

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 2 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see http://www.gnu.org/licenses/.
</pre>
</body>
</html>
